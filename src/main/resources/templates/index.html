<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../layui/css/layui.css">
  <link href='../fullcalendar/core/main.css' rel='stylesheet'/>
  <link href='../fullcalendar/daygrid/main.css' rel='stylesheet'/>
  <link href='../fullcalendar/timegrid/main.css' rel='stylesheet'/>
  <script src='../fullcalendar/core/main.js'></script>
  <script src='../fullcalendar/interaction/main.js'></script>
  <script src='../fullcalendar/daygrid/main.js'></script>
  <script src='../fullcalendar/timegrid/main.js'></script>
  <script src="../layui/layui.js"></script>
  <style>
    .page-title {
      text-align: center;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 50px;
      margin-top: 50px;
    }
    
    .layui-form {
      width: 1024px;
      margin: 0 auto;
    }
    
    body {
      margin: 40px 10px;
      padding: 0;
      font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
      font-size: 14px;
    }
    
    #calendar {
      max-width: 900px;
      margin: 0 auto;
    }
  </style>
</head>
<body>


<h3 class="page-title">外包考勤</h3>
<form class="layui-form" action="" lay-filter="example">
  <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">外包公司</label>
      <div class="layui-input-inline">
        <select name="interest" lay-filter="aihao">
          <option value=""></option>
          <option value="0">写作</option>
          <option value="1" selected="">阅读</option>
          <option value="2">游戏</option>
          <option value="3">音乐</option>
          <option value="4">旅行</option>
        </select>
      </div>
    </div>
    <div class="layui-inline">
      <label class="layui-form-label">外包人员</label>
      <div class="layui-input-inline">
        <select name="interest" lay-filter="aihao">
          <option value=""></option>
          <option value="0">写作</option>
          <option value="1" selected="">阅读</option>
          <option value="2">游戏</option>
          <option value="3">音乐</option>
          <option value="4">旅行</option>
        </select>
      </div>
    </div>
  </div>
  
  <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">考勤月份</label>
      <div class="layui-input-inline">
        <input type="text" class="layui-input" id="test3" placeholder="yyyy-MM">
      </div>
    </div>
    <div class="layui-inline">
      <label class="layui-form-label"></label>
      <div class="layui-input-inline">
        <button class="layui-btn" lay-submit="" lay-filter="demo1">查询</button>
        <button type="reset" class="layui-btn layui-btn-primary">导出</button>
      </div>
    </div>
  </div>
</form>


<div id="calendar"></div>
</body>
<script>
    layui.use(['form', 'layedit', 'laydate'], function () {
        var form = layui.form,
            layer = layui.layer,
            layedit = layui.layedit,
            laydate = layui.laydate;

        //年月选择器
        laydate.render({
            elem: '#test3',
            type: 'month'
        });

        //监听提交
        form.on('submit(demo1)', function (data) {
            return false;
        });

        //表单初始赋值
        form.val('example', {
            "username": "贤心" // "name": "value"
            ,
            "password": "123456",
            "interest": 1,
            "like[write]": true //复选框选中状态
            ,
            "close": true //开关状态
            ,
            "sex": "女",
            "desc": "我爱 layui"
        });
    });


    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            plugins: ['interaction', 'dayGrid', 'timeGrid'],
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            locale: 'zh-cn',
            firstDay: 1,
            weekMode: 'liquid',
            weekNumbers: false,
            aspectRatio: 1.35,
            handleWindowResize: true,
            defaultDate: '2019-06-12',
            navLinks: false,
            selectable: false,
            selectMirror: true,
            select: function (selectionInfo) {
                let {start, end, startStr, endStr, allDay, jsEvent, view, resource} = selectionInfo;
                layer.prompt(function (val, index) {
                    calendar.addEvent({
                        title: val,
                        start: start,
                        end: end,
                        allDay: allDay
                    });

                    layer.close(index);
                    calendar.unselect();
                });
            },
            unselectAuto: true,
            editable: true,
            eventLimit: true,
            dateClick: function () {
            
            },
            eventClick: function () {
                console.log(arguments);
            },
            events: function (date, wrappedSuccess, wrappedFailure) {//ajax请求数据并显示在响应时间段内
                console.log(arguments);
                let needList = [
                    {
                        title: 'All Day Event',
                        start: '2019-06-01',
                        editable: true
                    }, {
                        title: 'Long Event',
                        start: '2019-06-07',
                        end: '2019-06-10'
                    }];

                setTimeout(() => {
                    wrappedSuccess(needList)
                }, 3000);

            },
        });

        calendar.render();
    });

</script>

</html>
